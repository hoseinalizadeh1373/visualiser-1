<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>visualser</title>
    <link rel="stylesheet" href="1.css">
    <script type="text/javascript" src="dist/html2canvas.js"></script>
</head>
<body>
    <!-- <button style="position: absolute;left: 80%;" onclick="takeshot()">sds</button> -->
    <div id="content" >
        <input type="file" id="thefile" accept="audio/*" />
        <img src="2.jpg" id="img" class="box" style="z-index: 3;"/>
        <canvas id="canvas2" class="box"  style="z-index: 2;">
          

        </canvas>
       
        <!-- <canvas id="canvas" class="box" style="z-index: 3;"></canvas> -->
      
   
        <button style="cursor: pointer;z-index: 999999; position: absolute;left: 80%;" onclick="capture()">ds</button>
        <audio id="audio" controls style="z-index:20"></audio>
      </div>
     <img >
<canvas  id="output"></canvas>
     
      <script>
         function takeshot() {
            let div =
                document.getElementById('canvas');
  
            // Use the html2canvas
            // function to take a screenshot
            // and append it
            // to the output div
            html2canvas(div).then(
                function (canvas) {
                    document
                    .getElementById('output')
                    .appendChild(canvas);
                })
        }
      
            setInterval(function(){
                html2canvas(document.getElementById("content"),{allowTaint: true}).then(function(canvas) {
    //    let canvass = document.getElementById("output");
    //             // document.getElementById('output').appendChild(canvas);
    //             var ctx=canvass.getContext("2d");
        
      
                var base64image = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream");
                window.location.href=image;
        
    //         ctx.drawImage(canvas,0,0,400,200);
        
       
   });
            },100000);
       
          function capture() {
       
            
            html2canvas(document.getElementById("content"),{allowTaint: true}).then(function(canvas) {
       
                document.body.appendChild(canvas);
                var base64image = canvas.toDataURL("image/png");
               
                var fs = require('fs');
// string generated by canvas.toDataURL()
var fs = require('fs');
// string generated by canvas.toDataURL()
var img = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0"
    + "NAAAAKElEQVQ4jWNgYGD4Twzu6FhFFGYYNXDUwGFpIAk2E4dHDRw1cDgaCAASFOffhEIO"
    + "3gAAAABJRU5ErkJggg==";
// Grab the extension to resolve any image error
var ext = img.split(';')[0].match(/jpeg|png|gif/)[0];
// strip off the data: url prefix to get just the base64-encoded bytes
var data = img.replace(/^data:image\/\w+;base64,/, "");
var buf = new Buffer(img, 'base64');
fs.writeFile('image.' + ext, buf);
                // Image i =new Image= window.atob(base64image);
                //saveImage(base64image);
                console.log(base64image);

                // window.open(base64image , "_blank");
            });
        
        }
        function saveImage(base64string) {
        var imageData = base64string.split(',')[1];
        var a = $("<a>").attr("href", "data:Application/base64," + imageData )
                        .attr("download","image.png")
                        .appendTo("body");

            a[0].click();

        a.remove();
    }
    </script>
       
       
      <script src="1.js"></script>

   
</body>
</html>